<html><head><title>Module Eliom_state </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="application/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Eliom_state eliom"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="../.././../../" class="ocsimore_phrasing_link"><img src="../.././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Eliom</p><div class="mainmenu"><p class="mainmenu-home"><a href="../.././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href="../.././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p class="mainmenu-current"><a href="../.././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href="../.././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p><a href="../.././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a></p><p><a href="../.././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href="../.././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href="../.././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="../.././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="../.././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href="../.././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href="../.././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href="../.././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href="../.././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsipersist/" class="ocsimore_phrasing_link">Ocsipersist</a>
</li><li class="drawermainmenu-project"><a href="../.././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href="../.././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href="../.././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="../.././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="../.././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="../.././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href="../.././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="../.././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1> Eliom's Reference manual</h1><h2><a href="../.././manual/intro" class="ocsimore_phrasing_link">Introduction</a></h2><h3><span><a href="../.././../../tuto/latest/manual/basics">Client-server applications</a></span></h3><h3><span><a href="../.././../../tuto/latest/manual/basics-server">Server-side websites</a></span></h3><h2>Server-side programming</h2><h3>Services</h3><h4><a href="../.././manual/server-services" class="ocsimore_phrasing_link">The different types of services</a></h4><h4><a href="../.././manual/server-params" class="ocsimore_phrasing_link">Typing service parameters</a></h4><h4><a href="../.././manual/server-outputs" class="ocsimore_phrasing_link">Service handlers</a></h4><h4><a href="../.././manual/server-links" class="ocsimore_phrasing_link">Creating links and forms</a></h4><h3><a href="../.././manual/server-state" class="ocsimore_phrasing_link">Sessions and server side state</a></h3><h3><a href="../.././manual/server-security" class="ocsimore_phrasing_link">Security</a></h3><h2>Client-server programming</h2><h3><a href="../.././manual/clientserver-applications" class="ocsimore_phrasing_link">Eliom applications</a></h3><h3><a href="../.././manual/ppx-syntax" class="ocsimore_phrasing_link">Multi-tier programming</a></h3><h3><a href="../.././manual/clientserver-html" class="ocsimore_phrasing_link">Generating HTML</a></h3><h3><a href="../.././manual/clientserver-communication" class="ocsimore_phrasing_link">Communication</a></h3><h3><a href="../.././manual/clientserver-services" class="ocsimore_phrasing_link">Client-side services</a></h3><h3><a href="../.././manual/clientserver-react" class="ocsimore_phrasing_link">Shared reactive programming</a></h3><h3><a href="../.././manual/clientserver-cache" class="ocsimore_phrasing_link">Caching data and off-line applications</a></h3><h3><a href="../.././manual/clientserver-wrapping" class="ocsimore_phrasing_link">Custom wrapping</a></h3><h2>Workflows</h2><h3><a href="../.././manual/workflow-distillery" class="ocsimore_phrasing_link">Distillery</a></h3><h3><a href="../.././manual/mobile-apps" class="ocsimore_phrasing_link">Mobile apps</a></h3><h3><a href="../.././manual/workflow-configuration" class="ocsimore_phrasing_link">Configuration &amp; running</a></h3><h3><a href="../.././manual/scalability" class="ocsimore_phrasing_link">Scalability</a></h3><h1>Server API</h1><h2>Service creation</h2><h3><a href="../.././api/server/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href="../.././api/server/Eliom_parameter" class="ocsimore_phrasing_link">Eliom_parameter</a></h3><h3><a href="../.././api/server/Eliom_registration" class="ocsimore_phrasing_link">Eliom_registration</a></h3><h3><a href="../.././api/server/Eliom_registration.Html" class="ocsimore_phrasing_link">Eliom_registration.Html</a></h3><h3><a href="../.././api/server/Eliom_registration.Action" class="ocsimore_phrasing_link">Eliom_registration.Action</a></h3><h3><a href="../.././api/server/Eliom_registration.Ocaml" class="ocsimore_phrasing_link">Eliom_registration.Ocaml</a></h3><h3><a href="../.././api/server/Eliom_registration.App" class="ocsimore_phrasing_link">Eliom_registration.App</a></h3><h3><a href="../.././api/server/Eliom_registration.File" class="ocsimore_phrasing_link">Eliom_registration.File</a></h3><h3><a href="../.././api/server/Eliom_registration.Any" class="ocsimore_phrasing_link">Eliom_registration.Any</a></h3><h3><a href="../.././api/server/Eliom_registration.Redirection" class="ocsimore_phrasing_link">Eliom_registration.Redirection</a></h3><h2>Content and form creation</h2><h3><a href="../.././api/server/Eliom_content" class="ocsimore_phrasing_link">Eliom_content</a></h3><h3><a href="../.././api/server/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href="../.././api/server/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href="../.././api/server/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h3><a href="../.././api/server/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h3><h2>Server side state, requests, misc</h2><h3><a href="../.././api/server/Eliom_reference" class="ocsimore_phrasing_link">Eliom_reference</a></h3><h3><a href="../.././api/server/Eliom_state" class="ocsimore_phrasing_link">Eliom_state</a></h3><h3><a href="../.././api/server/Eliom_config" class="ocsimore_phrasing_link">Eliom_config</a></h3><h3><a href="../.././api/server/Eliom_request_info" class="ocsimore_phrasing_link">Eliom_request_info</a></h3><h3><a href="../.././api/server/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h3><h3><a href="../.././api/server/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h3><h2>Client/server communication</h2><h3><a href="../.././api/server/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h3><h3><a href="../.././api/server/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h3><h3><a href="../.././api/server/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href="../.././api/server/Eliom_notif" class="ocsimore_phrasing_link">Eliom_notif</a></h3><h3><a href="../.././api/server/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href="../.././api/server/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href="../.././api/server/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href="../.././api/server/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href="../.././api/server/index_types">Index of types</a></span></h3><h3> <span><a href="../.././api/server/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/server/index_values">Index of values</a></span></h3><h3> <span><a href="../.././api/server/index_modules">Index of modules</a></span></h3><h3> <span><a href="../.././api/server/index_module_types">Index of module types</a></span></h3><h1>Client API</h1><h2><a href="../.././api/client/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href="../.././api/client/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2><a href="../.././api/client/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2>Client/server communication</h2><h3><a href="../.././api/client/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href="../.././api/client/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href="../.././api/client/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href="../.././api/client/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href="../.././api/client/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href="../.././api/client/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Content and form creation</h2><h3><a href="../.././api/client/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href="../.././api/client/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href="../.././api/client/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h2>Index</h2><h3> <span><a href="../.././api/client/index_types">Index of types</a></span></h3><h3> <span><a href="../.././api/client/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/client/index_values">Index of values</a></span></h3><h3> <span><a href="../.././api/client/index_modules">Index of modules</a></span></h3><h3> <span><a href="../.././api/client/index_module_types">Index of module types</a></span></h3><h1>Ppx syntax</h1><h2><a href="../.././api/ppx/Ppx_eliom" class="ocsimore_phrasing_link">Ppx_eliom</a></h2></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value="../.././../dev/api/server/Eliom_state" selected="selected">dev</option><option value="../.././../10.x/api/server/Eliom_state">10.x</option><option value="../.././../8.x/api/server/Eliom_state">8.x</option><option value="../.././../1.3.4/api/server/Eliom_state">1.3.4</option></select><nav class="how-doctree"><h1> Eliom's Reference manual</h1><h2><a href="../.././manual/intro" class="ocsimore_phrasing_link">Introduction</a></h2><h3><span><a href="../.././../../tuto/latest/manual/basics">Client-server applications</a></span></h3><h3><span><a href="../.././../../tuto/latest/manual/basics-server">Server-side websites</a></span></h3><h2>Server-side programming</h2><h3>Services</h3><h4><a href="../.././manual/server-services" class="ocsimore_phrasing_link">The different types of services</a></h4><h4><a href="../.././manual/server-params" class="ocsimore_phrasing_link">Typing service parameters</a></h4><h4><a href="../.././manual/server-outputs" class="ocsimore_phrasing_link">Service handlers</a></h4><h4><a href="../.././manual/server-links" class="ocsimore_phrasing_link">Creating links and forms</a></h4><h3><a href="../.././manual/server-state" class="ocsimore_phrasing_link">Sessions and server side state</a></h3><h3><a href="../.././manual/server-security" class="ocsimore_phrasing_link">Security</a></h3><h2>Client-server programming</h2><h3><a href="../.././manual/clientserver-applications" class="ocsimore_phrasing_link">Eliom applications</a></h3><h3><a href="../.././manual/ppx-syntax" class="ocsimore_phrasing_link">Multi-tier programming</a></h3><h3><a href="../.././manual/clientserver-html" class="ocsimore_phrasing_link">Generating HTML</a></h3><h3><a href="../.././manual/clientserver-communication" class="ocsimore_phrasing_link">Communication</a></h3><h3><a href="../.././manual/clientserver-services" class="ocsimore_phrasing_link">Client-side services</a></h3><h3><a href="../.././manual/clientserver-react" class="ocsimore_phrasing_link">Shared reactive programming</a></h3><h3><a href="../.././manual/clientserver-cache" class="ocsimore_phrasing_link">Caching data and off-line applications</a></h3><h3><a href="../.././manual/clientserver-wrapping" class="ocsimore_phrasing_link">Custom wrapping</a></h3><h2>Workflows</h2><h3><a href="../.././manual/workflow-distillery" class="ocsimore_phrasing_link">Distillery</a></h3><h3><a href="../.././manual/mobile-apps" class="ocsimore_phrasing_link">Mobile apps</a></h3><h3><a href="../.././manual/workflow-configuration" class="ocsimore_phrasing_link">Configuration &amp; running</a></h3><h3><a href="../.././manual/scalability" class="ocsimore_phrasing_link">Scalability</a></h3><h1>Server API</h1><h2>Service creation</h2><h3><a href="../.././api/server/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href="../.././api/server/Eliom_parameter" class="ocsimore_phrasing_link">Eliom_parameter</a></h3><h3><a href="../.././api/server/Eliom_registration" class="ocsimore_phrasing_link">Eliom_registration</a></h3><h3><a href="../.././api/server/Eliom_registration.Html" class="ocsimore_phrasing_link">Eliom_registration.Html</a></h3><h3><a href="../.././api/server/Eliom_registration.Action" class="ocsimore_phrasing_link">Eliom_registration.Action</a></h3><h3><a href="../.././api/server/Eliom_registration.Ocaml" class="ocsimore_phrasing_link">Eliom_registration.Ocaml</a></h3><h3><a href="../.././api/server/Eliom_registration.App" class="ocsimore_phrasing_link">Eliom_registration.App</a></h3><h3><a href="../.././api/server/Eliom_registration.File" class="ocsimore_phrasing_link">Eliom_registration.File</a></h3><h3><a href="../.././api/server/Eliom_registration.Any" class="ocsimore_phrasing_link">Eliom_registration.Any</a></h3><h3><a href="../.././api/server/Eliom_registration.Redirection" class="ocsimore_phrasing_link">Eliom_registration.Redirection</a></h3><h2>Content and form creation</h2><h3><a href="../.././api/server/Eliom_content" class="ocsimore_phrasing_link">Eliom_content</a></h3><h3><a href="../.././api/server/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href="../.././api/server/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href="../.././api/server/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h3><a href="../.././api/server/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h3><h2>Server side state, requests, misc</h2><h3><a href="../.././api/server/Eliom_reference" class="ocsimore_phrasing_link">Eliom_reference</a></h3><h3><a href="../.././api/server/Eliom_state" class="ocsimore_phrasing_link">Eliom_state</a></h3><h3><a href="../.././api/server/Eliom_config" class="ocsimore_phrasing_link">Eliom_config</a></h3><h3><a href="../.././api/server/Eliom_request_info" class="ocsimore_phrasing_link">Eliom_request_info</a></h3><h3><a href="../.././api/server/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h3><h3><a href="../.././api/server/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h3><h2>Client/server communication</h2><h3><a href="../.././api/server/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h3><h3><a href="../.././api/server/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h3><h3><a href="../.././api/server/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href="../.././api/server/Eliom_notif" class="ocsimore_phrasing_link">Eliom_notif</a></h3><h3><a href="../.././api/server/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href="../.././api/server/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href="../.././api/server/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href="../.././api/server/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href="../.././api/server/index_types">Index of types</a></span></h3><h3> <span><a href="../.././api/server/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/server/index_values">Index of values</a></span></h3><h3> <span><a href="../.././api/server/index_modules">Index of modules</a></span></h3><h3> <span><a href="../.././api/server/index_module_types">Index of module types</a></span></h3><h1>Client API</h1><h2><a href="../.././api/client/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href="../.././api/client/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2><a href="../.././api/client/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2>Client/server communication</h2><h3><a href="../.././api/client/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href="../.././api/client/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href="../.././api/client/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href="../.././api/client/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href="../.././api/client/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href="../.././api/client/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Content and form creation</h2><h3><a href="../.././api/client/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href="../.././api/client/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href="../.././api/client/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h2>Index</h2><h3> <span><a href="../.././api/client/index_types">Index of types</a></span></h3><h3> <span><a href="../.././api/client/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href="../.././api/client/index_values">Index of values</a></span></h3><h3> <span><a href="../.././api/client/index_modules">Index of modules</a></span></h3><h3> <span><a href="../.././api/client/index_module_types">Index of module types</a></span></h3><h1>Ppx syntax</h1><h2><a href="../.././api/ppx/Ppx_eliom" class="ocsimore_phrasing_link">Ppx_eliom</a></h2></nav></nav><article class="rightcol"><h1>Module <span><a href="../.././api/server/Eliom_state">Eliom_state</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Eliom_state</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href="../.././api/server/Eliom_state">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Storing server-side values for your applications or sessions.
</p><hr/><p><strong>Please read the
<span><a href="../.././manual/server-state"> Eliom manual </a></span>
before this page to learn how server side state works. </strong>
</p><div id="overview" class="ocsimore_outline"><header><p><strong>Table of contents</strong></p></header></div><script>
//<![CDATA[
window.addEventListener("load", function(){ outline([0,-515484383,0,0,[0,"nav",[0,"aside",0]],"overview",1]); }, false); 
//]]>
</script><h2 id="2_Managingthestateofanapplication">Managing the state of an application <a class="backref" href="#2_Managingthestateofanapplication">&#182;</a></h2><h3 id="3_Closingsessionsremovingstatedataandservices">Closing sessions, removing state data and services <a class="backref" href="#3_Closingsessionsremovingstatedataandservices">&#182;</a></h3><pre class="ocsforge_color odocwiki_code" id="VALdiscard"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; `Client_process of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span><br/>         | `Request<br/>         | `Session of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span><br/>         | `Session_group of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Delete server-side (volatile and persistent) state data and services
for a session,
a group of sessions, a client process or a request.
</p><p>Use that function to close a session
(using scope <span class="odocwiki_inlinecode">Eliom_common.default_session_scope</span>).
</p><p>Closing a group of sessions will close all sessions in the group.
</p><p>By default will remove both secure and unsecure data and services, unless
<span class="odocwiki_inlinecode">~secure</span> is present.
</p><p><em>Warning: you may also want to unset some request-scoped Eliom references
when discarding a state.</em></p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_all_scopes"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_all_scopes</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALdiscard_data"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_data</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?persistent:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; `Client_process of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span><br/>         | `Request<br/>         | `Session of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span><br/>         | `Session_group of <span><a href="../.././api/server/Eliom_common#TYPEscope_hierarchy">Eliom_common.scope_hierarchy</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Remove current state data.
</p><p>If the optional parameter <span class="odocwiki_inlinecode">?persistent</span> is not present, will
remove both volatile and persistent data. Otherwise only volatile
or persistent data.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_services"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_services</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Remove all services registered for the given scope (the default being
<span class="odocwiki_inlinecode">`Session</span>).</p></div><h3 id="3_Statestatus">State status <a class="backref" href="#3_Statestatus">&#182;</a></h3><p>The following functions return the current state of the state for a given
scope:
</p><ul><li> <span class="odocwiki_inlinecode">Alive_state</span> means that data has been recorded for this scope
</li><li> <span class="odocwiki_inlinecode">Empty_state</span> means that there is no data for this scope
</li><li> <span class="odocwiki_inlinecode">Expired_state</span> means that data for this scope has been removed
because the timeout has been reached.
</li></ul><p>The default scope is <span class="odocwiki_inlinecode">`Session</span>.
</p><pre class="ocsforge_color odocwiki_code" id="TYPEstate_status"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">state_status</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Alive_state</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Empty_state</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Expired_state</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALservice_state_status"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">service_state_status</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Eliom_state#TYPEstate_status">state_status</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALvolatile_data_state_status"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">volatile_data_state_status</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Eliom_state#TYPEstate_status">state_status</a></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALpersistent_data_state_status"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">persistent_data_state_status</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href="../.././api/server/Eliom_state#TYPEstate_status">state_status</a></span> <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><h3 id="3_Usercookies">User cookies <a class="backref" href="#3_Usercookies">&#182;</a></h3><p>If you want to store a client-side state, and ask the browser to
send it back with each request, you can set manually your own cookies.
Usual cookies correspond to scope <span class="odocwiki_inlinecode">`Session</span> (that is, one browser).
The browser send them with each request to the same Web site.
But Eliom also implements client-side process cookies
(scope <span class="odocwiki_inlinecode">`Client_process</span>), that behave in the same way,
but for one instance of the client-side Eliom program (if there is one).
</p><p>Cookies can be limited to a subsite using the <span class="odocwiki_inlinecode">?path</span> optional
parameter. This path is relative to the main path of your Web site.
(It is not possible to set a cookie for a subsite larger than your current
Web site).
</p><p>Cookies can have an expiration date, specified (in seconds
since the 1st of January 1970) in the optional parameter <span class="odocwiki_inlinecode">?exp</span>
(see how to set default expiration dates below).
</p><p>Secure cookies are sent by the browser only with HTTPS (default: <span class="odocwiki_inlinecode">false</span>).
</p><pre class="ocsforge_color odocwiki_code" id="VALset_cookie"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_cookie</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?cookie_level:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_level">Eliom_common.cookie_level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?path:</span>string list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?exp:</span>float <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">name:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">value:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Ask the browser to record a cookie.</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_cookie"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_cookie</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?cookie_level:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_level">Eliom_common.cookie_level</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?path:</span>string list <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">name:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Ask the browser to remove a cookie.</p></div><h2 id="2_Sessiongroups">Session groups <a class="backref" href="#2_Sessiongroups">&#182;</a></h2><p>If your Web site has users,
it is a good idea to group together all the sessions for one user.
Otherwise, you may want to group sessions according to another
criterion.
</p><p>Session groups may be used for example to limit
the number of sessions one user can open at the same time, or to implement
a &quot;close all your sessions&quot; feature.
Usually, the group is the user name.
</p><h3 id="3_Puttingasessioninagroupremovingasessionfromagroup">Putting a session in a group, removing a session from a group <a class="backref" href="#3_Puttingasessioninagroupremovingasessionfromagroup">&#182;</a></h3><pre class="ocsforge_color odocwiki_code" id="VALset_service_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_service_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?set_max:</span>int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>sets the group to which belong the service session.
</p><p>If the optional <span class="odocwiki_inlinecode">?set_max</span> parameter is present, also sets the
maximum number of sessions in the group. Default: follow current
configuration for the group or default configuration if the group
does not exist.
</p><p>If <span class="odocwiki_inlinecode">~secure</span> is true, it will affect the secure session (secure cookies),
otherwise (default), the unsecure one (behavior change in Eliom 4).</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_service_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_service_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?set_max:</span>int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Remove the session from its group.
Will not close the session if it contains data.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_service_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_service_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> string option</span></pre><div class="odocwiki_info"><p>returns the group to which belong the service session.
If the session does not belong to any group,
or if no session is opened, return <span class="odocwiki_inlinecode">None</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_service_session_group_size"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_service_session_group_size</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> int option</span></pre><div class="odocwiki_info"><p>returns the number of sessions in the group. If he session does not
belong to any group or if no session is opened, returns <span class="odocwiki_inlinecode">None</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALset_volatile_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_volatile_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?set_max:</span>int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>sets the group to which belong the volatile data session.
</p><p>If the optional <span class="odocwiki_inlinecode">?set_max</span> parameter is present, also sets the maximum
number of sessions in the group.
Default: follow current configuration for the group
or default configuration if the group does not exist.</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_volatile_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_volatile_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?set_max:</span>int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Remove the session from its group.
Will not close the session if it contains data.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_volatile_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_volatile_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> string option</span></pre><div class="odocwiki_info"><p>returns the group to which belong the data session.
If the session does not belong to any group, or if no session is opened,
return <span class="odocwiki_inlinecode">None</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_volatile_data_session_group_size"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_volatile_data_session_group_size</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> int option</span></pre><div class="odocwiki_info"><p>returns the number of sessions in the group. If he session does not
belong to any group or if no session is opened, returns <span class="odocwiki_inlinecode">None</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALset_persistent_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_persistent_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?set_max:</span>int option <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>sets the group to which belong the persistent session.
</p><p>If the optional <span class="odocwiki_inlinecode">?set_max</span> parameter is present, also sets the
maximum number of sessions in the group. When <span class="odocwiki_inlinecode">~set_max:None</span> is
present, the number of session is unlimited. Default: follow
current configuration for the group or default configuration if
the group does not exist.</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_persistent_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_persistent_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Remove the session from its group.
Will not close the session if it contains data.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_persistent_data_session_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_persistent_data_session_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?scope:</span><span><a href="../.././api/server/Eliom_common#TYPEsession_scope">Eliom_common.session_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> string option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>returns the group to which belong the persistent session.
If the session does not belong to any group, or if no session is opened,
return <span class="odocwiki_inlinecode">None</span>.</p></div><h3 id="3_Maximumgroupsize">Maximum group size <a class="backref" href="#3_Maximumgroupsize">&#182;</a></h3><p>The following functions of this section set the maximum number of
sessions in a session group, for the different kinds of session.
This won't modify existing groups.
That value will be used only as default value if you do not specify the
optional parameter <span class="odocwiki_inlinecode">?set_max</span> of function
<span><a href="../.././api/server/Eliom_state#VALset_volatile_data_session_group">Eliom_state.set_volatile_data_session_group</a></span>.
</p><p>If there is no group, the number of sessions is limitated by sub network
(which can be a problem for example if the server is behind a
reverse proxy).
It is highly recommended to use session groups!
</p><ul><li> Default number of sessions in a group: 5
</li><li> Default number of sessions in a sub network: 1000000
</li><li> Default IPV4 sub network: /16
</li><li> Default IPV6 sub network: /56
</li></ul><p>These default can be changed from configuration file and/or
using these functions.
</p><p>If <span class="odocwiki_inlinecode">~override_configfile</span> is <span class="odocwiki_inlinecode">true</span> (default (<span class="odocwiki_inlinecode">false</span>),
then the function will set the value even if it has been
modified in the configuration file.
It means that by default, these functions have no effect
if there is a value in the configuration file.
This gives the ability to override the values chosen by the module
in the configuration file.
Use <span class="odocwiki_inlinecode">~override_configfile:true</span> for example if your
Eliom module wants to change the values afterwards
(for example in the site configuration Web interface).
</p><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_service_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_service_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of service sessions in a session group
(see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_data_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_data_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile data sessions in a session
group (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_persistent_data_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_persistent_data_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of persistent data sessions in a session
group (see above). <span class="odocwiki_inlinecode">None</span> means &quot;no limitation&quot;.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile sessions (data and service) in a session
group (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_service_sessions_per_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_service_sessions_per_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of service sessions in a subnet (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_data_sessions_per_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_data_sessions_per_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile data sessions in a subnet (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_sessions_per_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_sessions_per_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile sessions (data and service)
in a subnet (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_service_tab_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_service_tab_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of tab service sessions in a session group
(see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_data_tab_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_data_tab_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile data tab sessions in a session
group (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_persistent_data_tab_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_persistent_data_tab_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of persistent data tab sessions in a session
group (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_max_volatile_tab_sessions_per_group"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_max_volatile_tab_sessions_per_group</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile tab sessions (data and service)
in a session group (see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_ipv4_subnet_mask"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_ipv4_subnet_mask</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the mask for subnet (IPV4).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_ipv6_subnet_mask"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_ipv6_subnet_mask</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the mask for subnet (IPV6).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_max_service_states_for_group_or_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_max_service_states_for_group_or_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of service sessions in the current session
group (or for the client sub network, if there is no group).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_max_volatile_data_states_for_group_or_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_max_volatile_data_states_for_group_or_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile data sessions in the current session
group (or for the client sub network, if there is no group).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_max_volatile_states_for_group_or_subnet"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_max_volatile_states_for_group_or_subnet</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the maximum number of volatile sessions
(both data and service sessions) in the current
group (or for the client sub network, if there is no group).</p></div><h2 id="2_Expirationofcookiesandtimeouts">Expiration of cookies and timeouts <a class="backref" href="#2_Expirationofcookiesandtimeouts">&#182;</a></h2><h3 id="3_Cookieexpiration">Cookie expiration <a class="backref" href="#3_Cookieexpiration">&#182;</a></h3><p>The functions in this section ask the browser to set the state cookie
expiration date, for the different kinds of session, in seconds,
since the 1st of January 1970. <span class="odocwiki_inlinecode">None</span> means the cookie will expire
when the browser is closed. There is no way to set cookies
for an infinite time on browsers.
By default, Eliom sets default expiration date to
10 years after opening the session.
</p><p>By default, it will affect regular browser cookies (sessions).
But if you set <span class="odocwiki_inlinecode">~cookie_level:`Client_process</span>,
it will only affect the client-side Eliom process (if there is one),
which simulates some kind of &quot;tab cookies&quot;.
</p><pre class="ocsforge_color odocwiki_code" id="VALset_service_cookie_exp_date"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_service_cookie_exp_date</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the cookie expiration date for the current service state
(see above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_volatile_data_cookie_exp_date"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_volatile_data_cookie_exp_date</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the cookie expiration date for the current data state (see
above).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_persistent_data_cookie_exp_date"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_persistent_data_cookie_exp_date</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Sets the cookie expiration date for the persistent state (see
above).</p></div><h3 id="3_Globalconfigurationofstatetimeouts">Global configuration of state timeouts <a class="backref" href="#3_Globalconfigurationofstatetimeouts">&#182;</a></h3><p>The following functions set the timeout for states, for the
different kinds of states.  States will be closed after
this amount of time of inactivity from the user. <span class="odocwiki_inlinecode">None</span> means no
timeout.
</p><p>The optional parameter <span class="odocwiki_inlinecode">?recompute_expdates</span> is <span class="odocwiki_inlinecode">false</span> by
default.  If you set it to <span class="odocwiki_inlinecode">true</span>, the expiration dates for all
states in the table will be recomputed with the new timeout.
That is, the difference between the new timeout and the old one
will be added to their expiration dates (asynchronously,
by another Lwt thread, as this can take a long time).
States whose timeout has been set individually with
functions like
<span><a href="../.././api/server/Eliom_state#VALset_volatile_data_state_timeout">Eliom_state.set_volatile_data_state_timeout</a></span> won't be affected.
</p><p>If <span class="odocwiki_inlinecode">~scope_hierarchy</span> is not present,
it is the default for all scope hierarchies,
and in that case <span class="odocwiki_inlinecode">recompute_expdates</span> is ignored. <span class="odocwiki_inlinecode">~scope_hierarchy:None</span>
means the default scope hierarchy.
</p><p>If <span class="odocwiki_inlinecode">~override_configfile</span> is <span class="odocwiki_inlinecode">true</span> (default (<span class="odocwiki_inlinecode">false</span>),
then the function will set the timeout even if it has been
modified in the configuration file.
It means that by default, these functions have no effect
if there is a value in the configuration file.
This gives the ability to override the values chosen by the module
in the configuration file.
Use <span class="odocwiki_inlinecode">~override_configfile:true</span> for example if your
Eliom module wants to change the values afterwards
(for example in the site configuration Web interface).
</p><pre class="ocsforge_color odocwiki_code" id="VALset_global_volatile_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_global_volatile_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?recompute_expdates:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the (server side) timeout for volatile (= &quot;in memory&quot;) sessions (both
service session and volatile data session).</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_global_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_global_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?recompute_expdates:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the (server side) timeout for service states.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_global_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_global_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_level:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_level">Eliom_common.cookie_level</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALset_global_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_global_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?recompute_expdates:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the (server side) timeout for volatile (= &quot;in memory&quot;) data states.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_global_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_global_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_level:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_level">Eliom_common.cookie_level</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALset_global_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_global_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?recompute_expdates:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the (server side) timeout for persistent states.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_global_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_global_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_level:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_level">Eliom_common.cookie_level</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?override_configfile:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><pre class="ocsforge_color odocwiki_code" id="VALget_global_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_global_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option</span></pre><div class="odocwiki_info"><p>Returns the (server side) timeout for service states.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_global_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_global_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option</span></pre><div class="odocwiki_info"><p>Returns the (server side) timeout for &quot;volatile data&quot; states.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_global_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_global_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option</span></pre><div class="odocwiki_info"><p>Returns the (server side) timeout for persistent states.</p></div><h3 id="3_Personalizingtimeoutsforcurrentstate">Personalizing timeouts for current state <a class="backref" href="#3_Personalizingtimeoutsforcurrentstate">&#182;</a></h3><pre class="ocsforge_color odocwiki_code" id="VALset_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span><span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>sets the timeout for service state (server side) for current user,
in seconds. <span class="odocwiki_inlinecode">None</span> = no timeout</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>remove the service state timeout for current user
(and turn back to the default).</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_service_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_service_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option</span></pre><div class="odocwiki_info"><p>returns the timeout for current service state.
<span class="odocwiki_inlinecode">None</span> = no timeout</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>sets the (server side) timeout for volatile data state for current user,
in seconds. <span class="odocwiki_inlinecode">None</span> = no timeout</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>remove the &quot;volatile data&quot; state timeout for current user
(and turn back to the default).</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_volatile_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_volatile_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option</span></pre><div class="odocwiki_info"><p>returns the timeout for current volatile data state.
<span class="odocwiki_inlinecode">None</span> = no timeout</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>sets the (server side) timeout for persistent state for current user,
in seconds. <span class="odocwiki_inlinecode">None</span> = no timeout</p></div><pre class="ocsforge_color odocwiki_code" id="VALunset_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unset_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>remove the persistent state timeout for current user
(and turn back to the default).</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_persistent_data_state_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_persistent_data_state_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">cookie_scope:</span>[&lt; <span><a href="../.././api/server/Eliom_common#TYPEcookie_scope">Eliom_common.cookie_scope</a></span> ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> float option <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>returns the persistent state timeout for current user.
<span class="odocwiki_inlinecode">None</span> = no timeout</p></div><h2 id="2_Administratingserversidestate">Administrating server side state <a class="backref" href="#2_Administratingserversidestate">&#182;</a></h2><p><em>Warning: Most these functions must be called when the site
information is available, that is, either
during a request or during the initialisation phase of the site.
Otherwise, it will raise the exception
<span><a href="../.././api/server/Eliom_common#EXCEPTIONEliom_site_information_not_available">Eliom_common.Eliom_site_information_not_available</a></span>.
If you are using static linking, you must delay the call to this function
until the configuration file is read, using
<span><a href="../.././api/server/Eliom_service#VALregister_eliom_module">Eliom_service.register_eliom_module</a></span>. Otherwise you will also get
this exception.</em>
</p><pre class="ocsforge_color odocwiki_code" id="TYPEvolatile_table"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">volatile_table</span></pre><div class="odocwiki_info"><p>The type of (volatile) state data tables.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEpersistent_table"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">persistent_table</span></pre><div class="odocwiki_info"><p>The type of persistent state data tables.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_everything"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_everything</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Discard all services and persistent and volatile data for every scopes.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_all"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_all</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Discard all services and persistent and volatile data for one scope.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_all_data"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_all_data</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?persistent:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Discard server side data for all clients, for the given scope.
</p><p>If the optional parameter <span class="odocwiki_inlinecode">?persistent</span> is not present,
both the persistent and volatile data will be removed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdiscard_all_services"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">discard_all_services</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">scope:</span><span><a href="../.././api/server/Eliom_common#TYPEuser_scope">Eliom_common.user_scope</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">?secure:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_uid">Lwt</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span></span></pre><div class="odocwiki_info"><p>Remove all services registered for clients for the given scope.</p></div><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a href="../.././api/server/Eliom_state.Ext">Ext</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href="../.././api/server/Eliom_state.Ext">..</a></span><span class="ocsforge_color_keyword">end</span></pre></article></div></div></body></html>
