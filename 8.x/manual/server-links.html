<html><head><title>Creating links and forms</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="server-links eliom"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Eliom</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p class="mainmenu-current"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1> Eliom's Reference manual</h1><h2><a href="intro" class="ocsimore_phrasing_link">Introduction</a></h2><h2>Server-side programming</h2><h3>Services</h3><h4><a href="server-services" class="ocsimore_phrasing_link">The different types of services</a></h4><h4><a href="server-params" class="ocsimore_phrasing_link">Typing service parameters</a></h4><h4><a href="server-outputs" class="ocsimore_phrasing_link">Service handlers</a></h4><h4><a href="server-links" class="ocsimore_phrasing_link">Creating links and forms</a></h4><h3><a href="server-state" class="ocsimore_phrasing_link">Sessions and server side state</a></h3><h3><a href="server-security" class="ocsimore_phrasing_link">Security</a></h3><h2>Client-server programming</h2><h3><a href="clientserver-applications" class="ocsimore_phrasing_link">Eliom applications</a></h3><h3><a href="clientserver-html" class="ocsimore_phrasing_link">Generating HTML</a></h3><h3><a href="clientserver-communication" class="ocsimore_phrasing_link">Communication</a></h3><h3><a href="clientserver-services" class="ocsimore_phrasing_link">Client-side services</a></h3><h3><a href="clientserver-react" class="ocsimore_phrasing_link">Shared reactive programming</a></h3><h3><a href="clientserver-cache" class="ocsimore_phrasing_link">Caching data and off-line applications</a></h3><h3><a href="clientserver-wrapping" class="ocsimore_phrasing_link">Custom wrapping</a></h3><h2>Workflows</h2><h3><a href="workflow-distillery" class="ocsimore_phrasing_link">Distillery</a></h3><h3><a href="mobile-apps" class="ocsimore_phrasing_link">Mobile apps</a></h3><h3><a href="workflow-compilation" class="ocsimore_phrasing_link">Compilation</a></h3><h3><a href="workflow-configuration" class="ocsimore_phrasing_link">Configuration &amp; running</a></h3><h3><a href="scalability" class="ocsimore_phrasing_link">Scalability</a></h3><h2>Syntax</h2><h3><a href="ppx-syntax" class="ocsimore_phrasing_link">PPX-based syntax</a></h3><h3><a href="clientserver-language" class="ocsimore_phrasing_link">Camlp4-based syntax</a></h3><h3><a href="ppx-migration" class="ocsimore_phrasing_link">Migration to PPX</a></h3><h1>Ppx syntax</h1><h2><a href=".././api/ppx/Ppx_eliom" class="ocsimore_phrasing_link">Ppx_eliom</a></h2><h1>Server API</h1><h2><a href=".././api/server/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2><a href=".././api/server/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href=".././api/server/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2><a href=".././api/server/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h2><h2><a href=".././api/server/Eliom_config" class="ocsimore_phrasing_link">Eliom_config</a></h2><h2><a href=".././api/server/Eliom_request_info" class="ocsimore_phrasing_link">Eliom_request_info</a></h2><h2><a href=".././api/server/Eliom_reference" class="ocsimore_phrasing_link">Eliom_reference</a></h2><h2><a href=".././api/server/Eliom_state" class="ocsimore_phrasing_link">Eliom_state</a></h2><h2>Content and form creation</h2><h3><a href=".././api/server/Eliom_content" class="ocsimore_phrasing_link">Eliom_content</a></h3><h3><a href=".././api/server/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href=".././api/server/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href=".././api/server/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h3><a href=".././api/server/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h3><h2>Service creation</h2><h3><a href=".././api/server/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href=".././api/server/Eliom_parameter" class="ocsimore_phrasing_link">Eliom_parameter</a></h3><h3><a href=".././api/server/Eliom_registration" class="ocsimore_phrasing_link">Eliom_registration</a></h3><h3><a href=".././api/server/Eliom_registration.Html" class="ocsimore_phrasing_link">Eliom_registration.Html</a></h3><h3><a href=".././api/server/Eliom_registration.Action" class="ocsimore_phrasing_link">Eliom_registration.Action</a></h3><h3><a href=".././api/server/Eliom_registration.Ocaml" class="ocsimore_phrasing_link">Eliom_registration.Ocaml</a></h3><h3><a href=".././api/server/Eliom_registration.App" class="ocsimore_phrasing_link">Eliom_registration.App</a></h3><h3><a href=".././api/server/Eliom_registration.File" class="ocsimore_phrasing_link">Eliom_registration.File</a></h3><h3><a href=".././api/server/Eliom_registration.Any" class="ocsimore_phrasing_link">Eliom_registration.Any</a></h3><h3><a href=".././api/server/Eliom_registration.Redirection" class="ocsimore_phrasing_link">Eliom_registration.Redirection</a></h3><h2>Client/server communication</h2><h3><a href=".././api/server/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href=".././api/server/Eliom_notif" class="ocsimore_phrasing_link">Eliom_notif</a></h3><h3><a href=".././api/server/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href=".././api/server/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href=".././api/server/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href=".././api/server/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href=".././api/server/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/server/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/server/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/server/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/server/index_module_types">Index of module types</a></span></h3><h1>Ocamlbuild plugin</h1><h2><a href=".././api/ocamlbuild/Ocamlbuild_eliom" class="ocsimore_phrasing_link">Ocamlbuild_eliom</a></h2><h1>Client API</h1><h2><a href=".././api/client/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2><a href=".././api/client/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href=".././api/client/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2>Content and form creation</h2><h3><a href=".././api/client/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href=".././api/client/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href=".././api/client/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h2>Client/server communication</h2><h3><a href=".././api/client/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href=".././api/client/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href=".././api/client/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href=".././api/client/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href=".././api/client/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href=".././api/client/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href=".././api/client/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/client/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/client/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/client/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/client/index_module_types">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../dev/manual/server-links">dev</option><option value=".././../8.x/manual/server-links" selected="selected">8.x</option><option value=".././../1.3.4/manual/server-links">1.3.4</option></select><nav class="how-doctree"><h1> Eliom's Reference manual</h1><h2><a href="intro" class="ocsimore_phrasing_link">Introduction</a></h2><h2>Server-side programming</h2><h3>Services</h3><h4><a href="server-services" class="ocsimore_phrasing_link">The different types of services</a></h4><h4><a href="server-params" class="ocsimore_phrasing_link">Typing service parameters</a></h4><h4><a href="server-outputs" class="ocsimore_phrasing_link">Service handlers</a></h4><h4><a href="server-links" class="ocsimore_phrasing_link">Creating links and forms</a></h4><h3><a href="server-state" class="ocsimore_phrasing_link">Sessions and server side state</a></h3><h3><a href="server-security" class="ocsimore_phrasing_link">Security</a></h3><h2>Client-server programming</h2><h3><a href="clientserver-applications" class="ocsimore_phrasing_link">Eliom applications</a></h3><h3><a href="clientserver-html" class="ocsimore_phrasing_link">Generating HTML</a></h3><h3><a href="clientserver-communication" class="ocsimore_phrasing_link">Communication</a></h3><h3><a href="clientserver-services" class="ocsimore_phrasing_link">Client-side services</a></h3><h3><a href="clientserver-react" class="ocsimore_phrasing_link">Shared reactive programming</a></h3><h3><a href="clientserver-cache" class="ocsimore_phrasing_link">Caching data and off-line applications</a></h3><h3><a href="clientserver-wrapping" class="ocsimore_phrasing_link">Custom wrapping</a></h3><h2>Workflows</h2><h3><a href="workflow-distillery" class="ocsimore_phrasing_link">Distillery</a></h3><h3><a href="mobile-apps" class="ocsimore_phrasing_link">Mobile apps</a></h3><h3><a href="workflow-compilation" class="ocsimore_phrasing_link">Compilation</a></h3><h3><a href="workflow-configuration" class="ocsimore_phrasing_link">Configuration &amp; running</a></h3><h3><a href="scalability" class="ocsimore_phrasing_link">Scalability</a></h3><h2>Syntax</h2><h3><a href="ppx-syntax" class="ocsimore_phrasing_link">PPX-based syntax</a></h3><h3><a href="clientserver-language" class="ocsimore_phrasing_link">Camlp4-based syntax</a></h3><h3><a href="ppx-migration" class="ocsimore_phrasing_link">Migration to PPX</a></h3><h1>Ppx syntax</h1><h2><a href=".././api/ppx/Ppx_eliom" class="ocsimore_phrasing_link">Ppx_eliom</a></h2><h1>Server API</h1><h2><a href=".././api/server/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2><a href=".././api/server/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href=".././api/server/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2><a href=".././api/server/Eliom_common" class="ocsimore_phrasing_link">Eliom_common</a></h2><h2><a href=".././api/server/Eliom_config" class="ocsimore_phrasing_link">Eliom_config</a></h2><h2><a href=".././api/server/Eliom_request_info" class="ocsimore_phrasing_link">Eliom_request_info</a></h2><h2><a href=".././api/server/Eliom_reference" class="ocsimore_phrasing_link">Eliom_reference</a></h2><h2><a href=".././api/server/Eliom_state" class="ocsimore_phrasing_link">Eliom_state</a></h2><h2>Content and form creation</h2><h3><a href=".././api/server/Eliom_content" class="ocsimore_phrasing_link">Eliom_content</a></h3><h3><a href=".././api/server/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href=".././api/server/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href=".././api/server/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h3><a href=".././api/server/Eliom_tools" class="ocsimore_phrasing_link">Eliom_tools</a></h3><h2>Service creation</h2><h3><a href=".././api/server/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href=".././api/server/Eliom_parameter" class="ocsimore_phrasing_link">Eliom_parameter</a></h3><h3><a href=".././api/server/Eliom_registration" class="ocsimore_phrasing_link">Eliom_registration</a></h3><h3><a href=".././api/server/Eliom_registration.Html" class="ocsimore_phrasing_link">Eliom_registration.Html</a></h3><h3><a href=".././api/server/Eliom_registration.Action" class="ocsimore_phrasing_link">Eliom_registration.Action</a></h3><h3><a href=".././api/server/Eliom_registration.Ocaml" class="ocsimore_phrasing_link">Eliom_registration.Ocaml</a></h3><h3><a href=".././api/server/Eliom_registration.App" class="ocsimore_phrasing_link">Eliom_registration.App</a></h3><h3><a href=".././api/server/Eliom_registration.File" class="ocsimore_phrasing_link">Eliom_registration.File</a></h3><h3><a href=".././api/server/Eliom_registration.Any" class="ocsimore_phrasing_link">Eliom_registration.Any</a></h3><h3><a href=".././api/server/Eliom_registration.Redirection" class="ocsimore_phrasing_link">Eliom_registration.Redirection</a></h3><h2>Client/server communication</h2><h3><a href=".././api/server/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href=".././api/server/Eliom_notif" class="ocsimore_phrasing_link">Eliom_notif</a></h3><h3><a href=".././api/server/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href=".././api/server/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href=".././api/server/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href=".././api/server/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href=".././api/server/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/server/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/server/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/server/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/server/index_module_types">Index of module types</a></span></h3><h1>Ocamlbuild plugin</h1><h2><a href=".././api/ocamlbuild/Ocamlbuild_eliom" class="ocsimore_phrasing_link">Ocamlbuild_eliom</a></h2><h1>Client API</h1><h2><a href=".././api/client/Eliom_lib" class="ocsimore_phrasing_link">Eliom_lib</a></h2><h2><a href=".././api/client/Eliom_client" class="ocsimore_phrasing_link">Eliom_client</a></h2><h2><a href=".././api/client/Eliom_client_value" class="ocsimore_phrasing_link">Eliom_client_value</a></h2><h2>Content and form creation</h2><h3><a href=".././api/client/Eliom_content.Html" class="ocsimore_phrasing_link">Eliom_content.Html</a></h3><h3><a href=".././api/client/Eliom_content.Svg" class="ocsimore_phrasing_link">Eliom_content.Svg</a></h3><h3><a href=".././api/client/Eliom_content.Xml" class="ocsimore_phrasing_link">Eliom_content.Xml</a></h3><h2>Client/server communication</h2><h3><a href=".././api/client/Eliom_service" class="ocsimore_phrasing_link">Eliom_service</a></h3><h3><a href=".././api/client/Eliom_shared" class="ocsimore_phrasing_link">Eliom_shared</a></h3><h3><a href=".././api/client/Eliom_cscache" class="ocsimore_phrasing_link">Eliom_cscache</a></h3><h3><a href=".././api/client/Eliom_bus" class="ocsimore_phrasing_link">Eliom_bus</a></h3><h3><a href=".././api/client/Eliom_comet" class="ocsimore_phrasing_link">Eliom_comet</a></h3><h3><a href=".././api/client/Eliom_react" class="ocsimore_phrasing_link">Eliom_react</a></h3><h2>Index</h2><h3> <span><a href=".././api/client/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/client/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/client/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/client/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/client/index_module_types">Index of module types</a></span></h3></nav></nav><article class="rightcol"><h1>Creating links and forms</h1><div id="overview" class="ocsimore_outline"><header><p><strong>Table of contents</strong></p></header></div><script>
//<![CDATA[
window.addEventListener("load", function(){ outline([0,-515484383,0,[0,2],[0,"nav",[0,"aside",0]],"overview",1]); }, false); 
//]]>
</script><h2 id="links">Links <a class="backref" href="#links">&#182;</a></h2><p>To create a link (<span class="teletype">&lt;a&gt;</span>), use the
<span><a href=".././api/server/Eliom_content.Html.D#VALa">Eliom_content.Html.D.a</a></span> function,
as in these examples:
</p><pre class=""><code class="language-ocaml translatable">open Eliom_content

 let links = Eliom_registration.Html.create
   ~path:(Eliom_service.Path [&quot;rep&quot;;&quot;links&quot;])
   ~meth:(Eliom_service.Get Eliom_parameter.unit)
 (fun () () -&gt;
   Lwt.return
    Html.D.(
      html
       (head (title (txt &quot;Links&quot;)) [])
       (body
         [p
          [a theservice [txt &quot;coucou&quot;] (); br ();
           a hello [txt &quot;hello&quot;] (); br ();
           a default
             [txt &quot;default page of the dir&quot;] (); br ();
           a uasuffix
             [txt &quot;uasuffix&quot;] (2007,06); br ();
           a service_with_params
             [txt &quot;Service with params&quot;] (42,(22,&quot;ciao&quot;)); br ();
           a raw_serv
             [txt &quot;raw_serv&quot;] [(&quot;sun&quot;,&quot;yellow&quot;);(&quot;sea&quot;,&quot;blue and pink&quot;)]; br ();
           a
             (Eliom_service.extern
                ~prefix:&quot;http://fr.wikipedia.org&quot;
                ~path:[&quot;wiki&quot;;&quot;&quot;]
                ~meth:(Eliom_service.Get
                         Eliom_parameter.(suffix (all_suffix &quot;suff&quot;)))
                ())
             [txt &quot;OCaml on wikipedia&quot;]
             [&quot;OCaml&quot;]; br ();
           Raw.a
             ~a:[a_href (Raw.uri_of_string &quot;http://en.wikipedia.org/wiki/OCaml&quot;)]
             [txt &quot;OCaml on wikipedia&quot;]
         ]])))</code></pre><p><span><a href=".././api/server/Eliom_content.Html.D#VALa">Eliom_content.Html.D.a</a></span> takes as first parameter
the service you want to link to.
The second parameter is the text of the link.
The last parameter is for
GET parameters you want to put in the link.
The type of this parameter and the name of GET parameters depend
on the service you link to.
</p><p>The link to Wikipedia shows how to define an external service (here it
uses a suffix URL).
For an external service without parameters, you can use the low level
function  <span><a href=".././api/server/Eliom_content.Html.D.Raw#VALa">Eliom_content.Html.D.Raw.a</a></span>, if you don't want to create an
external service explicitly.
Note that the path must be a list of strings:
do not write <span class="teletype">[&quot;foo/bar&quot;]</span>,
but <span class="teletype">[&quot;foo&quot;;&quot;bar&quot;]</span>; otherwise, the &quot;/&quot; will be encoded in
the URL.<br/>
</p><p>If you want to create (mutually or not) recursive pages, create the
service using <span><a href=".././api/server/Eliom_service#VALcreate">Eliom_service.create</a></span> first, then
register it in the table using (for example) <span><a href=".././api/server/Eliom_registration.Html#VALregister">Eliom_registration.Html.register</a></span>:
</p><pre class=""><code class="language-ocaml translatable">let linkrec =
  Eliom_service.create
    ~path:(Eliom_service.Path [&quot;linkrec&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit) ()

let _ =
  Eliom_registration.Html.register
    linkrec
    (fun () () -&gt;
       Lwt.return
         (html
            (head (title (txt &quot;&quot;)) [])
            (body [p [a linkrec [txt &quot;click&quot;] ()]])))</code></pre><p>(You can also refer to <em>the current service</em> via <span class="teletype">reload_action</span>
(<span><a href=".././api/server/Eliom_service_sigs.S#VALreload_action">Eliom_service_sigs.S.reload_action</a></span>).
</p><h2 id="forms">Forms <a class="backref" href="#forms">&#182;</a></h2><h3>Raw forms</h3><p>Modules <span><a href=".././../../eliom/latest/api/server/Eliom_content.Html.F">Eliom_content.Html.F</a></span> and
<span><a href=".././../../eliom/latest/api/server/Eliom_content.Html.D">Eliom_content.Html.D</a></span>
define form elements with the usual typed interface from TyXML.
Use this for example if you have a client side program and
want to manipulate the form contents from client side functions
(for example do a server function call with the form elements content).
</p><p>Example:
</p><pre class="shared" class=""><code class="language-ocaml translatable">let%shared mk_form ()
  =
  let open Eliom_content.Html in
  let open Eliom_content.Html.F in
  let theinput = D.input () in
  let thesubmit =
    D.input ~a:[a_input_type `Submit; a_value &quot;Go&quot;] ()
  in
  Raw.form
    ~a:
      [ a_onsubmit
          [%client
            fun ev -&gt;
              let value = Js.to_string ~%theinput##.value in
              ...
          ]
      ]
    [theinput; thesubmit]</code></pre><h3>Typed forms towards GET services</h3><p>In contrast, modules <span class="teletype">Eliom_content.Html.D.Form</span>
and <span class="teletype">Eliom_content.Html.F.Form</span> provide functions
for creating typed forms towards Eliom services.
Use them if you want to create regular HTML forms,
(with submit button).
</p><p>Our examples use shorthands to these modules, e.g.,
simply <span class="teletype">Form</span>, assuming an appropriate context.
See
<span><a href=".././api/server/Eliom_content_sigs.LINKS_AND_FORMS.Form">Eliom_content_sigs.LINKS_AND_FORMS.Form</a></span>
for the <span class="teletype">Form</span> API documentation.
</p><p>The function <span class="teletype">Eliom_content.Html.D.Form.get_form</span>
allows creation of forms that use the GET method (parameters in the
URL). It works like <span><a href=".././api/server/Eliom_content.Html.D#VALa">Eliom_content.Html.D.a</a></span> but takes
a <em>function</em> that creates the form from the parameters names as
parameter.
</p><pre class=""><code class="language-ocaml translatable">let create_form =
  (fun (number_name, (number2_name, string_name)) -&gt;
    Html.D.(
      [p [txt &quot;Write an int: &quot;;
        Form.input ~input_type:`Text ~name:number_name Form.int;
        txt &quot;Write another int: &quot;;
        Form.input ~input_type:`Text ~name:number2_name Form.int;
        txt &quot;Write a string: &quot;;
        Form.input ~input_type:`Text ~name:string_name Form.string;
        Form.input ~input_type:`Submit ~value:&quot;Click&quot; Form.string]]
    ))

let form =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;form&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
       let f = Html.D.Form.get_form service_with_params create_form in
       Lwt.return
         (html
           (head (title (txt &quot;&quot;)) [])
           (body [f])))</code></pre><p>Parameter names are typed to make sure that they are used
properly. The form-creating functions in <span class="code">Eliom_content.Html.D.Form</span> (respectively <span class="code">Eliom_content.Html.F.Form</span>) accept an argument of type
<span class="teletype">Eliom_content.Html.D.Form.param</span> (respectively
<span class="teletype">Eliom_content.Html.F.Form.param</span>), which needs to
match the type of the parameter used. For example,
<span class="code">number_name</span> has type <span class="code">int param_name</span>, so <span class="code">Form.int</span>
must be used with <span class="code">Form.input</span>
(or with the other widgets), whereas
<span class="code">string_name</span> has type
<span class="code">string param_name</span>
and must be used in conjunction with the argument
<span class="code">Form.string</span>.
Creating form widgets are described in detail in
<span class="teletype">Eliom_content.Html.D.Form</span>
(and <span class="teletype">Eliom_content.Html.F.Form</span>).
</p><p>For untyped forms, you may use functions from the module <span><a href=".././api/server/Eliom_content.Html.D.Raw">Eliom_content.Html.D.Raw</a></span>.
Here is a form linking to our (untyped) service <span class="teletype">raw_serv</span>.
</p><pre class=""><code class="language-ocaml translatable">let raw_form =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;anyform&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
      Lwt.return
        Html.D.(html
                   (head (title (txt &quot;&quot;)) [])
                   (body
                      [h1 [txt &quot;Any Form&quot;];
                       Form.get_form raw_serv
                         (fun () -&gt;
                           [p [txt &quot;Form to raw_serv: &quot;;
                               raw_input ~input_type:`Text ~name:&quot;plop&quot; ();
                               raw_input ~input_type:`Text ~name:&quot;plip&quot; ();
                               raw_input ~input_type:`Text ~name:&quot;plap&quot; ();
                               raw_input ~input_type:`Submit ~value:&quot;Click&quot; ()]])
                        ])))</code></pre><h3>POST parameters</h3><p>By default Web page parameters are transferred in the URL (GET parameters).
A Web page may also expect POST parameters
(that is, parameters that are not in the URL but in the body of the HTTP
request, if the POST method is used).
</p><pre class=""><code class="language-ocaml translatable">let no_post_param_service =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;post&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
      Lwt.return
        (html
         (head (title (txt &quot;&quot;)) [])
         (body [h1 [txt
                      &quot;Version of the page without POST parameters&quot;]])))

let my_service_with_post_params =
  Eliom_registration.Html.create_attached_post
    ~fallback:no_post_param_service
    ~post_params:Eliom_parameter.(string &quot;value&quot;)
    (fun () value -&gt;
      Lwt.return
        (html
         (head (title (txt &quot;&quot;)) [])
         (body [h1 [txt value]])))</code></pre><p>Services may take both GET and POST parameters:
</p><pre class=""><code class="language-ocaml translatable">let get_no_post_param_service =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;post2&quot;])
    ~meth:(Eliom_service.Get (Eliom_parameter.int &quot;i&quot;))
    (fun i () -&gt;
      Lwt.return
        (html
         (head (title (txt &quot;&quot;)) [])
         (body [p [txt &quot;No POST parameter, i:&quot;;
                   em [txt (string_of_int i)]]])))

let my_service_with_get_and_post =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;post2&quot;])
    ~meth:(Eliom_service.Post (Eliom_parameter.int &quot;i&quot;,
                               Eliom_parameter.string &quot;value&quot;))
    (fun i value -&gt;
      Lwt.return
        (html
           (head (title (txt &quot;&quot;)) [])
           (body [p [txt &quot;Value: &quot;;
                     em [txt value];
                     txt &quot;, i: &quot;;
                     em [txt (string_of_int i)]]])))</code></pre><h3 id="postforms">POST forms <a class="backref" href="#postforms">&#182;</a></h3><p>To create a POST form, use the
<span class="teletype">Eliom_content.Html.D.Form.post_form</span> function.
It is similar to <span class="teletype">Eliom_content.Html.D.Form.get_form</span>
with an additional parameter for the GET parameters you want to put in
the URL (if any). Here, <span class="code">form2</span> is a page containing
a form to the service <span class="code">post</span> (using Html.F's
functions) and <span class="code">form3</span> (defined using the syntax
contains a form to <span class="code">post2</span>, with a GET parameter.
<span class="code">form4</span> is a form to an external page.
</p><p><em>Warning:</em> Some examples in this section use the Tyxml syntax extension.
(See <span><a href=".././../../tyxml/latest/manual/ppx">Tyxml's manual</a></span>).
<em>Warning:</em> After installing Tyxml, <span class="teletype">tyxml-ppx</span> should be added to the lists of SERVER PACKAGES and CLIENT PACKAGES
in the Makefile.options file of your project.
</p><pre class=""><code class="language-ocaml translatable">let form2 =
    Eliom_registration.Html.create
      ~path:(Eliom_service.Path [&quot;form2&quot;])
      ~meth:(Eliom_service.Get Eliom_parameter.unit)
      (fun () () -&gt;
         let f =
           (Eliom_content.Html.D.Form.post_form my_service_with_post_params
              (fun chaine -&gt;
                 [p [txt &quot;Write a string: &quot;;
                  Form.input
                    ~input_type:`Text ~name:chaine
                    Form.string]]) ())
         in
         Lwt.return
           (html
             (head (title (txt &quot;form&quot;)) [])
             (body [f])))

let form3 =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;form3&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
       let module Html = Html.D in
       let f  =
         (Eliom_content.Html.D.Form.post_form my_service_with_get_and_post
            (fun chaine -&gt;
              [ [%html &quot;&lt;p&gt; Write a string:
                      &quot;[Form.input
                          ~input_type:`Text ~name:chaine
                          Form.string)&quot; &lt;/p&gt;&quot;])
            222) in
       Lwt.return
         [%html &quot;&lt;html&gt;
              &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
              &lt;body&gt;&quot;[f]&quot;&lt;/body&gt;&lt;/html&gt;&quot;])

let form4 =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;form4&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
  (fun () () -&gt;
     let module Html = Eliom_content.Html.D in
     let f  =
       (Eliom_content.Html.D.Form.post_form
          (Eliom_service.extern
             ~prefix:&quot;http://www.petizomverts.com&quot;
             ~path:[&quot;zebulon&quot;]
             ~meth:(Eliom_service.Post (int &quot;i&quot;, string &quot;chaine&quot;))
             ())
          (fun chaine -&gt;
            [ [%html &quot;&lt;p&gt; Write a string:
                     &quot;[Form.input ~input_type:`Text ~name:chaine
                         Form.string]&quot; &lt;/p&gt; &quot;])
          222) in
     Lwt.return
       (html
        (head (title (txt &quot;form&quot;)) [])
        (body [f])))</code></pre><h2 id="advancedformsandparameters">Advanced forms and parameters <a class="backref" href="#advancedformsandparameters">&#182;</a></h2><p>This section shows more advanced use of page parameters and
corresponding forms.
</p><h3>Parsing parameters using regular expressions</h3><p>Eliom_parameter.regexp allows parsing page parameters using (Perl-compatible)
regular expressions. We use the module <span class="code">Netstring_pcre</span>,
from <em>OCamlnet</em>. See the documentation about OCamlnet
for more information.
The following example shows a service that accepts only parameters
values enclosed between <span class="code">[</span> and <span class="code">]</span>:
</p><pre class=""><code class="language-ocaml translatable">let r = Netstring_pcre.regexp &quot;\\\\[(.*)\\\\]&quot;

let regexp =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;regexp&quot;])
    ~meth:
      (Eliom_service.Get
        Eliom_parameter.(regexp r &quot;$1&quot; (fun s -&gt; s) &quot;myparam&quot;))
    (fun g () -&gt;
      Lwt.return
        Html.D.(html
                  (head (title (txt &quot;&quot;)) [])
                  (body [p [txt g]])))</code></pre><pre class=""><code class="language-ocaml translatable">let myregexp = Netstring_pcre.regexp &quot;\\[(.*)\\]&quot;

let regexpserv =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;regexp&quot;])
    ~meth:(Eliom_service.Get
            Eliom_parameter.(regexp myregexp &quot;$1&quot; (fun s -&gt; s) &quot;myparam&quot;))
    (fun g () -&gt;
      Lwt.return
        Html.D.(html
                  (head (title (txt &quot;&quot;)) [])
                  (body [p [txt g]])))</code></pre><h3>Boolean checkboxes</h3><p>Page may take parameter of type <span class="code">bool</span>.
A possible use of this type is in a form
with <em>boolean checkboxes</em>, as in the example below:
</p><pre class=""><code class="language-ocaml translatable">(* Form with bool checkbox: *)
let bool_params =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;bool&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.(bool &quot;case&quot;))
  (fun case () -&gt;
    let module Html = Html.D in
    Lwt.return
      [%html &quot;&lt;html&gt;
           &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
           &lt;body&gt;
           &lt;p&gt;
             &quot;[txt (if case then &quot;checked&quot; else &quot;not checked&quot;)]&quot;
           &lt;/p&gt;
           &lt;/body&gt;
         &lt;/html&gt; &quot;])

let create_form_bool casename =
    let module Html = Html.D in
    [ [%html &quot;&lt;p&gt;check? &quot;[Form.bool_checkbox_one ~name:casename ()]&quot; &lt;br/&gt;
        &quot;[Form.input ~input_type:`Submit ~value:&quot;Click&quot; Form.string]&quot;&lt;/p&gt; &quot;] ]

let form_bool =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;formbool&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
  (fun () () -&gt;
     let module Html = Html.D in
     let f = Form.get_form bool_params create_form_bool in
     Lwt.return
       [%html &quot;&lt;html&gt;
            &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
            &lt;body&gt; &quot;[f]&quot; &lt;/body&gt;
          &lt;/html&gt; &quot;])</code></pre><p><em>Important warning:</em>
As you can see, browsers do not send any value
for unchecked boxes! An unchecked box is equivalent to no parameter
at all! Thus it is not possible to distinguish between a service
taking a boolean and a service taking no parameter at all
(if they share the same URL).
In Eliom services with higher priority are tried first, and then
they are tried in order of registration.
The first matching service will answer.<br/>
</p><p>Other types similar to bool:
</p><ul><li> <span class="teletype">Eliom_parameter.opt</span> (page taking an optional parameter),
</li><li> <span class="teletype">Eliom_parameter.sum</span> (either a parameter or another).
</li></ul><p>See <span><a href=".././api/server/Eliom_parameter_sigs.S">Eliom_parameter_sigs.S</a></span>.
</p><h3>Type <span class="code">set</span></h3><p>Page may take several parameters of the same name.
It is useful when you want to create a form with a variable number
of fields.
To do that with Eliom, use the type <span class="teletype">Eliom_parameter.set</span>.
For example, <span class="code">set int &quot;val&quot;</span> means that the page will take
zero, one, or several parameters of name <span class="code">&quot;val&quot;</span>,
all of type <span class="code">int</span>.
The function you register will receive the parameters in a list.
Example:
</p><pre class=""><code class="language-ocaml translatable">let set = Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;set&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.(set string &quot;s&quot;))
  (fun l () -&gt;
    let module Html = Html.D in
    let ll =
      List.map
        (fun s -&gt; [%html &quot;&lt;strong&gt;&quot;[txt s]&quot;&lt;/strong&gt;&quot;]) l
    in
    Lwt.return
    [%html &quot;&lt;html&gt;
         &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
         &lt;body&gt;
         &lt;p&gt;
           You sent:
           &quot;ll&quot;
         &lt;/p&gt;
         &lt;/body&gt;
       &lt;/html&gt; &quot;])</code></pre><p>These parameters may come from several kinds of widgets in forms.
Here is an example of a form with several checkboxes, all sharing the
same name, but with different values:
</p><pre class=""><code class="language-ocaml translatable">(* form to set *)
let setform = Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;setform&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
      Lwt.return
        (html
           (head (title (txt &quot;&quot;)) [])
           (body [h1 [txt &quot;Set Form&quot;];
                  Form.get_form set
                    (fun n -&gt;
                      [p [txt &quot;Form to set: &quot;;
                          Form.checkbox
                            ~name:n ~value:&quot;box1&quot;
                            Form.string;
                          Form.checkbox
                            ~name:n ~value:&quot;box2&quot; ~checked:true
                            Form.string;
                          Form.checkbox
                            ~name:n ~value:&quot;box3&quot;
                            Form.string;
                          Form.checkbox
                            ~name:n ~value:&quot;box4&quot;
                            Form.string;
                          Form.input
                            ~input_type:`Submit ~value:&quot;Click&quot;
                            Form.string]])
                ])))</code></pre><p>Once again, note that there is no difference between an empty
set or no parameter at all. If you register a service without parameters
and a service with a set of parameters on the same URL, the service with
higher priority, or the firstly registered service that matches,
will answer.
</p><h3>Select</h3><p>Here is an example of a select box.
</p><pre class=""><code class="language-ocaml translatable">let select_example_result = Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;select&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.(string &quot;s&quot;))
    (fun g () -&gt;
      Lwt.return
        (html
           (head (title (txt &quot;&quot;)) [])
           (body [p [txt &quot;You selected: &quot;;
                     strong [txt g]]])))

let create_select_form =
  (fun select_name -&gt;
    Html.D.(
      [p [txt &quot;Select something: &quot;;
        Form.select Form.string ~name:select_name
          (Form.Option ([] (* attributes *),
                        &quot;Bob&quot; (* value *),
                        None (* Content, if different from value *),
                        false (* not selected *))) (* first line *)
          [Form.Option ([], &quot;Marc&quot;, None, false);
          (Form.Optgroup
          ([],
           &quot;Girls&quot;,
           ([], &quot;Karin&quot;, None, false),
           [([a_disabled ()], &quot;Juliette&quot;, None, false);
            ([], &quot;Alice&quot;, None, true);
            ([], &quot;Germaine&quot;, Some (txt &quot;Bob's mother&quot;), false)]))]
          ;
        Form.input ~input_type:`Submit ~value:&quot;Send&quot; Form.string]]
    ))

let select_example =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;select&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
  (fun () () -&gt;
     let open Html.D in
     let f = Form.get_form select_example_result create_select_form in
     Lwt.return
       (html
         (head (title (txt &quot;&quot;)) [])
         (body [f])))</code></pre><p>To do &quot;multiple&quot; select boxes, use functions like
<span class="teletype">Eliom_content.Html.D.Form.multiple_select</span>.
As you can see in the type, the service must be declared with parameters
of type <span class="teletype">Eliom_parameter.set</span>.
</p><h3>Clickable images</h3><p>Here is an example of clickable image.
You receive the coordinates the user clicked on.
</p><pre class=""><code class="language-ocaml translatable">let coord = Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;coord&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.(coordinates &quot;coord&quot;))
  (fun c () -&gt;
    let module Html = Html.D in
    Lwt.return
      [%html&quot; &lt;html&gt;
           &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
           &lt;body&gt;
           &lt;p&gt;
             You clicked on coordinates:
             (&quot;[txt (string_of_int c.abscissa)]&quot;, &quot;[txt (string_of_int c.ordinate)]&quot;)
           &lt;/p&gt;
           &lt;/body&gt;
         &lt;/html&gt; &quot;])

(* form to image *)
let imageform = Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;imageform&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
      Lwt.return
        (html
           (head (title (txt &quot;&quot;)) [])
           (body [h1 [txt &quot;Image Form&quot;];
                  Form.get_form coord
                    (fun n -&gt;
                      [p [Form.image_input
                            ~src:(make_uri ~service:(Eliom_service.static_dir ()) [&quot;ocsigen5.png&quot;])
                            ~name:n
                            ()]])
                ])))</code></pre><h3>Type <span class="code">list</span></h3><p>Another way (than <span class="teletype">Eliom_parameter.set</span>) to do variable length forms
is to use indexed lists (using  <span class="teletype">Eliom_parameter.list</span>).
The use of that feature is a bit more complex than <span class="code">set</span>.
Here is an example of service taking an indexed list as parameter:
</p><pre class=""><code class="language-ocaml translatable">(* lists *)
let service_list =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;thepath&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.(list &quot;a&quot; (string &quot;str&quot;)))
    (fun l () -&gt;
      let open Eliom_content.Html.D in
      let ll = List.map (fun s -&gt; strong [txt s]) l in
      Lwt.return (html (head (title (txt &quot;Example&quot;)) []) (body [p ll])))</code></pre><p><em>Warning:</em>
As for sets or bools,
if a request has no parameter, it will be considered as the empty list.
Services with higher priority are tried first, otherwise
they are tried in order of registration.
</p><p>As you see, the names of each list element is built from the name
of the list, the name of the list element, and an index.
To spare you creating yourself these names, Eliom provides you an iterator
to create them.
</p><pre class=""><code class="language-ocaml translatable">(* Form with list: *)
let create_listform f =
  (* Here, f.it is an iterator like List.map,
     but it must be applied to a function taking 3 arguments
     (unlike 1 in map), the first one being the name of the parameter,
     and the second one the element of list.
     The last parameter of f.it is the code that must be appended at the
     end of the list created
  *)
  let open Eliom_content.Html.D in
  f.Eliom_parameter.it
    (fun stringname v init -&gt;
      p
        [ txt &quot;Write the value for &quot;
        ; txt v
        ; txt &quot; :&quot;
        ; Form.input ~input_type:`Text ~name:stringname Form.string ]
      :: init)
    [&quot;one&quot;; &quot;two&quot;; &quot;three&quot;; &quot;four&quot;]
    [p [Form.input ~input_type:`Submit ~value:&quot;Click&quot; Form.string]]

let _ =
  Eliom_registration.Html.create
    ~path:(Eliom_service.Path [&quot;listform&quot;])
    ~meth:(Eliom_service.Get Eliom_parameter.unit)
    (fun () () -&gt;
      let open Eliom_content.Html.D in
      let f = Form.get_form ~service:service_list create_listform in
      Lwt.return (html (head (title (txt &quot;Example&quot;)) []) (body [f])))</code></pre><p><em>Important warning:</em>
As we have seen in the section about boolean (or optional)
parameters, it is not possible to distinguish between a boolean
with value &quot;false&quot;, and no parameter at all.
This causes problems if you create a list of boolean or optional
values, as it is not possible to know the length of the list.
In that case, Eliom always takes the shortest possible list.
</p><h3>Forms and suffixes</h3><p>Service with &quot;suffix&quot; URLs have an equivalent version with
usual parameters, allowing creation of forms towards such services.
Example:
</p><pre class=""><code class="language-ocaml translatable">(* Form for service with suffix: *)
let create_suffixform ((suff, endsuff),i) =
     let module Html = Eliom_content.Html.D in
    [%html &quot;&lt;p&gt;Write the suffix:
      &quot;[Form.input ~input_type:`Text ~name:suff Form.int]&quot; &lt;br/&gt;
      Write a string: &quot;[Form.input
         ~input_type:`Text ~name:endsuff Form.string]
         &quot; &lt;br/&gt;
      Write an int: &quot;[Form.input ~input_type:`Text ~name:i Form.int]&quot; &lt;br/&gt;
      &quot;[Form.input ~input_type:`Submit ~value:&quot;Click&quot; Form.string]&quot;&lt;/p&gt; &quot;]

let suffixform = Eliom_registration.Html.create
  ~path:(Eliom_service.Path [&quot;suffixform&quot;])
  ~meth:(Eliom_service.Get Eliom_parameter.unit)
  (fun () () -&gt;
     let f = Form.get_form isuffix create_suffixform in
     let module Html = Eliom_content.Html.D in
     Lwt.return
      [%html &quot;&lt;html&gt;
           &lt;head&gt;&lt;title&gt;Example&lt;/title&gt;&lt;/head&gt;
           &lt;body&gt; &quot;[f]&quot; &lt;/body&gt;
         &lt;/html&gt; &quot;])</code></pre><p>Decode the URL encoded string using <span class="teletype">Ocsigen_lib.Url.string_of_url_path ~encode:false</span>
</p><h3>Uploading files</h3><p>The <span class="teletype">Eliom_parameter.file</span> parameter type allows files to be sent in your
request. The service gets something of type
<span><a href=".././../../ocsigenserver/latest/api/Ocsigen_extensions#TYPEfile_info">Ocsigen_extensions.file_info</a></span>. You can extract information
using this using these functions (from  <span><a href=".././api/server/Eliom_request_info">Eliom_request_info</a></span>):
</p><pre class=""><code class="language-ocaml translatable">val get_tmp_filename : Ocsigen_extensions.file_info -&gt; string
val get_filesize : Ocsigen_extensions.file_info -&gt; int64
val get_original_filename : Ocsigen_extensions.file_info -&gt; string</code></pre><p><span><a href=".././api/server/Eliom_request_info#VALget_tmp_filename">Eliom_request_info.get_tmp_filename</a></span> returns the actual name
of the uploaded file on the hard drive.
<span><a href=".././api/server/Eliom_request_info#VALget_original_filename">Eliom_request_info.get_original_filename</a></span> gives the original filename.
</p><p>To enable file upload, you must configure a directory for uploaded
files in Ocsigen's configuration file.  For example:
</p><div class="pre"><p>&lt;uploaddir&gt;/tmp&lt;/uploaddir&gt;</p></div><p>Files are kept in this directory only while processing the request.
They are automatically removed afterwards. Therefore, your services
must copy the files somewhere else, if the files are to be kept. In
the following example, we create a new hard link to the file to keep
it. (The destination must be on the same partition of the disk.)
</p><pre class=""><code class="language-ocaml translatable">let upload = Eliom_service.create
    ~path:(Eliom_service.Path [&quot;upload&quot;])
    ~meth:(Eliom_service.Get unit)
    ()

let upload2 = Eliom_registration.Html.create
   ~path:(Eliom_service.Path [&quot;upload&quot;])
   ~meth:(Eliom_service.Post (Eliom_parameter.unit,
                              Eliom_parameter.file &quot;file&quot;))
    (fun () file -&gt;
      let to_display =
        let newname = &quot;/tmp/thefile&quot; in
        (try
          Unix.unlink newname;
        with _ -&gt; ());
        Lwt_log.ign_debug (Eliom_request_info.get_tmp_filename file);
        Unix.link (Eliom_request_info.get_tmp_filename file) newname;
        let fd_in = open_in newname in
        try
          let line = input_line fd_in in close_in fd_in; line (*end*)
        with End_of_file -&gt; close_in fd_in; &quot;vide&quot;
      in
      Lwt.return
        (html
           (head (title (txt &quot;Upload&quot;)) [])
           (body [h1 [txt to_display]])))


let uploadform = Eliom_registration.Html.register upload
    (fun () () -&gt;
      let f =
        (Form.post_form upload2
           (fun file -&gt;
             [p [Form.file_input ~name:file ();
                 br ();
                 Form.input ~input_type:`Submit ~value:&quot;Send&quot; Form.string
               ]]) ()) in
      Lwt.return
        (html
           (head (title (txt &quot;form&quot;)) [])
           (body [f])))</code></pre><h3>Raw POST data (advanced use)</h3><p>By specifying <span class="teletype">~post_params:Eliom_parameter.raw_post_params</span>,
it is possible to create a service that takes as parameter any POST
data, as a stream. The only restriction is that it does not work if
the content-type corresponds to URL encoded form data or multipart data
(because in these cases, there are POST parameters, which are decoded by Eliom
to find the service).
</p><p>See the API reference for more information.</p></article></div></div></body></html>
